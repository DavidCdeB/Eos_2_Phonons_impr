# Eos_2_Phonons_impr

Given a `g.out`:

```
 LATTICE PARAMETERS (ANGSTROMS AND DEGREES) - BOHR = 0.5291772083 ANGSTROM
 PRIMITIVE CELL - CENTRING CODE 7/0 VOLUME=   122.771603 - DENSITY  2.704 g/cm^3
         A              B              C           ALPHA      BETA       GAMMA
     6.32540491     6.32540491     6.32540491    46.774144  46.774144  46.774144
 *******************************************************************************
 ATOMS IN THE ASYMMETRIC UNIT    3 - ATOMS IN THE UNIT CELL:   10
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA   -5.000000000000E-01 -5.000000000000E-01 -5.000000000000E-01
      3 T   6 C     2.500000000000E-01  2.500000000000E-01  2.500000000000E-01
      4 F   6 C    -2.500000000000E-01 -2.500000000000E-01 -2.500000000000E-01
      5 T   8 O    -4.912600492192E-01 -8.739950780750E-03  2.500000000000E-01
      6 F   8 O     2.500000000000E-01 -4.912600492193E-01 -8.739950780750E-03
      7 F   8 O    -8.739950780750E-03  2.500000000000E-01 -4.912600492193E-01
      8 F   8 O     4.912600492193E-01  8.739950780750E-03 -2.500000000000E-01
      9 F   8 O    -2.500000000000E-01  4.912600492193E-01  8.739950780750E-03
     10 F   8 O     8.739950780750E-03 -2.500000000000E-01  4.912600492193E-01

 TRANSFORMATION MATRIX PRIMITIVE-CRYSTALLOGRAPHIC CELL
  1.0000  0.0000  1.0000 -1.0000  1.0000  1.0000  0.0000 -1.0000  1.0000

 *******************************************************************************
 CRYSTALLOGRAPHIC CELL (VOLUME=        368.31480902)
         A              B              C           ALPHA      BETA       GAMMA
     5.02162261     5.02162261    16.86554607    90.000000  90.000000 120.000000

 COORDINATES IN THE CRYSTALLOGRAPHIC CELL
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA    0.000000000000E+00  0.000000000000E+00 -5.000000000000E-01
      3 T   6 C     3.333333333333E-01 -3.333333333333E-01 -8.333333333333E-02
      4 F   6 C    -3.333333333333E-01  3.333333333333E-01  8.333333333333E-02
      5 T   8 O    -4.079267158859E-01 -3.333333333333E-01 -8.333333333333E-02
      6 F   8 O     3.333333333333E-01 -7.459338255258E-02 -8.333333333333E-02
      7 F   8 O     7.459338255258E-02  4.079267158859E-01 -8.333333333333E-02
      8 F   8 O     4.079267158859E-01  3.333333333333E-01  8.333333333333E-02
      9 F   8 O    -3.333333333333E-01  7.459338255258E-02  8.333333333333E-02
     10 F   8 O    -7.459338255258E-02 -4.079267158859E-01  8.333333333333E-02

 T = ATOM BELONGING TO THE ASYMMETRIC UNIT


more lines
more lines
more lines

 FINAL OPTIMIZED GEOMETRY - DIMENSIONALITY OF THE SYSTEM      3
 (NON PERIODIC DIRECTION: LATTICE PARAMETER FORMALLY SET TO 500)
 *******************************************************************************
 LATTICE PARAMETERS (ANGSTROMS AND DEGREES) - BOHR = 0.5291772083 ANGSTROM
 PRIMITIVE CELL - CENTRING CODE 7/0 VOLUME=   119.823364 - DENSITY  2.770 g/cm^3
         A              B              C           ALPHA      BETA       GAMMA
     6.28373604     6.28373604     6.28373604    46.646397  46.646397  46.646397
 *******************************************************************************
 ATOMS IN THE ASYMMETRIC UNIT    3 - ATOMS IN THE UNIT CELL:   10
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA   -5.000000000000E-01 -5.000000000000E-01 -5.000000000000E-01
      3 T   6 C     2.500000000000E-01  2.500000000000E-01  2.500000000000E-01
      4 F   6 C    -2.500000000000E-01 -2.500000000000E-01 -2.500000000000E-01
      5 T   8 O    -4.924094276183E-01 -7.590572381674E-03  2.500000000000E-01
      6 F   8 O     2.500000000000E-01 -4.924094276183E-01 -7.590572381674E-03
      7 F   8 O    -7.590572381674E-03  2.500000000000E-01 -4.924094276183E-01
      8 F   8 O     4.924094276183E-01  7.590572381674E-03 -2.500000000000E-01
      9 F   8 O    -2.500000000000E-01  4.924094276183E-01  7.590572381674E-03
     10 F   8 O     7.590572381674E-03 -2.500000000000E-01  4.924094276183E-01

 TRANSFORMATION MATRIX PRIMITIVE-CRYSTALLOGRAPHIC CELL
  1.0000  0.0000  1.0000 -1.0000  1.0000  1.0000  0.0000 -1.0000  1.0000

 *******************************************************************************
 CRYSTALLOGRAPHIC CELL (VOLUME=        359.47009054)
         A              B              C           ALPHA      BETA       GAMMA
     4.97568007     4.97568007    16.76591397    90.000000  90.000000 120.000000

 COORDINATES IN THE CRYSTALLOGRAPHIC CELL
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA   -5.491739570355E-17 -2.745869785177E-17 -5.000000000000E-01
      3 T   6 C     3.333333333333E-01 -3.333333333333E-01 -8.333333333333E-02
      4 F   6 C    -3.333333333333E-01  3.333333333333E-01  8.333333333333E-02
      5 T   8 O    -4.090760942850E-01 -3.333333333333E-01 -8.333333333333E-02
      6 F   8 O     3.333333333333E-01 -7.574276095166E-02 -8.333333333333E-02
      7 F   8 O     7.574276095166E-02  4.090760942850E-01 -8.333333333333E-02
      8 F   8 O     4.090760942850E-01  3.333333333333E-01  8.333333333333E-02
      9 F   8 O    -3.333333333333E-01  7.574276095166E-02  8.333333333333E-02
     10 F   8 O    -7.574276095166E-02 -4.090760942850E-01  8.333333333333E-02

 T = ATOM BELONGING TO THE ASYMMETRIC UNIT
 INFORMATION **** fort.34 **** GEOMETRY OUTPUT FILE

more lines
more lines
more lines

 FINAL OPTIMIZED GEOMETRY - DIMENSIONALITY OF THE SYSTEM      3
 (NON PERIODIC DIRECTION: LATTICE PARAMETER FORMALLY SET TO 500)
 *******************************************************************************
 LATTICE PARAMETERS (ANGSTROMS AND DEGREES) - BOHR = 0.5291772083 ANGSTROM
 PRIMITIVE CELL - CENTRING CODE 7/0 VOLUME=   121.143469 - DENSITY  2.740 g/cm^3
         A              B              C           ALPHA      BETA       GAMMA
     6.32229536     6.32229536     6.32229536    46.436583  46.436583  46.436583
 *******************************************************************************
 ATOMS IN THE ASYMMETRIC UNIT    3 - ATOMS IN THE UNIT CELL:   10
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA    5.000000000000E-01 -5.000000000000E-01 -5.000000000000E-01
      3 T   6 C     2.500000000000E-01  2.500000000000E-01  2.500000000000E-01
      4 F   6 C    -2.500000000000E-01 -2.500000000000E-01 -2.500000000000E-01
      5 T   8 O    -4.927088991116E-01 -7.291100888437E-03  2.500000000000E-01
      6 F   8 O     2.500000000000E-01 -4.927088991116E-01 -7.291100888437E-03
      7 F   8 O    -7.291100888437E-03  2.500000000000E-01 -4.927088991116E-01
      8 F   8 O     4.927088991116E-01  7.291100888437E-03 -2.500000000000E-01
      9 F   8 O    -2.500000000000E-01  4.927088991116E-01  7.291100888437E-03
     10 F   8 O     7.291100888437E-03 -2.500000000000E-01  4.927088991116E-01

 TRANSFORMATION MATRIX PRIMITIVE-CRYSTALLOGRAPHIC CELL
  1.0000  0.0000  1.0000 -1.0000  1.0000  1.0000  0.0000 -1.0000  1.0000

 *******************************************************************************
 CRYSTALLOGRAPHIC CELL (VOLUME=        363.43040599)
         A              B              C           ALPHA      BETA       GAMMA
     4.98494429     4.98494429    16.88768068    90.000000  90.000000 120.000000

 COORDINATES IN THE CRYSTALLOGRAPHIC CELL
     ATOM                 X/A                 Y/B                 Z/C
 *******************************************************************************
      1 T  20 CA    0.000000000000E+00  0.000000000000E+00  0.000000000000E+00
      2 F  20 CA   -5.471726358381E-17 -2.735863179191E-17 -5.000000000000E-01
      3 T   6 C     3.333333333333E-01 -3.333333333333E-01 -8.333333333333E-02
      4 F   6 C    -3.333333333333E-01  3.333333333333E-01  8.333333333333E-02
      5 T   8 O    -4.093755657782E-01 -3.333333333333E-01 -8.333333333333E-02
      6 F   8 O     3.333333333333E-01 -7.604223244490E-02 -8.333333333333E-02
      7 F   8 O     7.604223244490E-02  4.093755657782E-01 -8.333333333333E-02
      8 F   8 O     4.093755657782E-01  3.333333333333E-01  8.333333333333E-02
      9 F   8 O    -3.333333333333E-01  7.604223244490E-02  8.333333333333E-02
     10 F   8 O    -7.604223244490E-02 -4.093755657782E-01  8.333333333333E-02

 T = ATOM BELONGING TO THE ASYMMETRIC UNIT
 INFORMATION **** fort.34 **** GEOMETRY OUTPUT FILE

more lines
more lines
more lines
```
The following code will extract the final optimized primitive cell volume, the final optimized crystallographic cell true (T) atomic coordinates and atomic numbers.

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

global N_atom_irreducible_unit
N_atom_irreducible_unit = 3

filename = 'g.out'

VOLUMES = []
P0 = []
P2 = []
ATOMIC_NUMBERS = []
Xs = []
Ys = []
Zs = []

with open(filename) as gout:
    final_optimized_geometry = False
    for line in gout:
        if 'FINAL OPTIMIZED GEOMETRY' in line:
            final_optimized_geometry = True
        elif 'PRIMITIVE CELL - CENTRING CODE' in line:
            if final_optimized_geometry:
                volume = line.split()
                print volume
                print volume[7]
                volume = line.split()[7]
                VOLUMES.append(volume)

        elif ' CRYSTALLOGRAPHIC CELL (V' in line:
            if final_optimized_geometry:
                print 'gout.next() =', gout.next()
                done = gout.next()
                print 'done =', done
                p0 = done.split()[0]
                p2 = done.split()[2]

#               p0, p2 = done.split()[0:3:2]

                P0.append(p0)
                P2.append(p2)
        elif 'COORDINATES IN THE CRYSTALLOGRAPHIC CELL' in line:
            if final_optimized_geometry:
                gout.next()
                myline = gout.next()
                while True:  # This is necessary to scan every coordinate's line.
                  line = gout.next()
                  print 'line coords =', line
                  atomdata = line.split()
                  print 'atomdata = ', atomdata
                  if not atomdata:   # If you don't put this, the program will complain: IndexError: list index out of range
                      break
                  if atomdata[1] != 'T':
                      continue
                      atomicnumber = atomdata[2]
                      x, y, z = atomdata[4:7]
                      ATOMIC_NUMBERS.append(atomicnumber)
                      Xs.append(x)
                      Ys.append(y)
                      Zs.append(z)
                final_optimized_geometry = False

print 'VOLUMES = ', VOLUMES
print 'P0 = ', P0
print 'P2 = ', P2
print 'Xs = ', Xs
print 'Ys = ', Ys
print 'Zs = ', Zs
print 'ATOMIC_NUMBERS = ', ATOMIC_NUMBERS
```

However, the third part of the program is very interesting:

**1)** `while True` allows to scan every coordinates line, not only `myline`

**2)** I was thinking that a simpler way to write this code would be to omit the `if not atomdata:`, and just play with the `if atomdata[1] != 'T'`:

```
        elif 'COORDINATES IN THE CRYSTALLOGRAPHIC CELL' in line:
            if final_optimized_geometry:
                gout.next()
                myline = gout.next()
                while True:  # This is necessary to scan every coordinate's line.
                  line = gout.next()
                  print 'line coords =', line
                  atomdata = line.split()
                  print 'atomdata = ', atomdata
#                 if not atomdata:   
#                     break
                  if atomdata[1] != 'T':
                      continue
                      atomicnumber = atomdata[2]
                      x, y, z = atomdata[4:7]
                      ATOMIC_NUMBERS.append(atomicnumber)
                      Xs.append(x)
                      Ys.append(y)
                      Zs.append(z)
                final_optimized_geometry = False
```
For some reson I do not understand, if you do not put this `if not atomdata:` condition, you get `IndexError: list index out of range`. Why is this happening??

**3)** I think the final `final_optimized_geometry = False` is not necessary. Which is its function?
